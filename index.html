<script>(z=>{let _=(e,t)=>new Proxy(((...n)=>1==n.length&&"function"==typeof n[0]?e.addEventListener(t.pop(),n[0])||_(e,t):n.forEach((t=>e.appendChild("string"==typeof t?new Text(t):t)))||e),{get:(n,p)=>(t.push(p),2==t.length&&e.setAttribute(t.pop(),t.pop()),_(e,t))}),$=new Proxy({},{get:(e,t)=>_(document.createElement(t),[])});document.documentElement.remove();document.append($.html["ja"]["lang"]($.head($.meta["UTF-8"]["charset"](),$.meta["viewport"]["name"]["width=device-width, initial-scale=1.0"]["content"](),$.title("minifyhtml")),$.body($.h1("minifyhtml"),$.p("javascriptを用いて無駄なHTMLを最小化します。"),$.h2("注意"),$.p("HTMLのIDを指定した要素がグローバル変数になる機能が使えないっぽいです。",$.br(),$.small("まあIDを指定することがグローバル汚染として問題視されるぐらいだから使わないと思うけど")),$.input["file"]["type"]["c()"]["onchange"](),$.br(),$.span(),$.button["navigator.clipboard.writeText(g('textarea').value)"]["onclick"]("コピー"),$.iframe["display:none"]["style"](),$.br(),$.textarea[""]["readonly"]["word-break:break-all;width:100%;height:50%;resize:vertical"]["style"](),$.script["https://unpkg.com/terser@5.37.0/dist/bundle.min.js"]["src"](),$.script("let g=e=>document.querySelector(e);g(\"iframe\").onload=e=>{let t=g(\"iframe\").contentDocument.documentElement.outerText.length,n=e=>/$[a-zA-Z$_]+[a-zA-Z0-9$_]*^/.test(e)?\".\"+e:`[${JSON.stringify(e)}]`,r=(e,t)=>{if(1==e.nodeType)return`$.${e.tagName.toLowerCase()}${Array.from(e.attributes).map((e=>[e.value,e.name])).flat().map(n).join(\"\")}(${Array.from(e.childNodes).map((t=>r(t,\"SCRIPT\"==e.tagName))).filter((e=>e)).join(\",\")})`;if(!t)return\"\"==e.nodeValue.trim()?void 0:JSON.stringify(e.nodeValue.trim());try{return JSON.stringify(Terser.minify_sync(e.nodeValue).code)}catch(t){return console.log(t),JSON.stringify(e.nodeValue)}};g(\"textarea\").value=`<script>(z=>{let _=(e,t)=>new Proxy(((...n)=>1==n.length&&\"function\"==typeof n[0]?e.addEventListener(t.pop(),n[0])||_(e,t):n.forEach((t=>e.appendChild(\"string\"==typeof t?new Text(t):t)))||e),{get:(n,p)=>(t.push(p),2==t.length&&e.setAttribute(t.pop(),t.pop()),_(e,t))}),$=new Proxy({},{get:(e,t)=>_(document.createElement(t),[])});document.documentElement.remove();document.append(${r(g(\"iframe\").contentDocument.documentElement)})})()<\\/script>`,g(\"span\").textContent=`圧縮率(推測): ${g(\"textarea\").value.length/t*100}%`};let c=e=>0==g(\"input\").files.length?alert(\"ファイルが選択されていません\"):g(\"input\").files[0].text().then((e=>g(\"iframe\").srcdoc=e));"))))})()</script>